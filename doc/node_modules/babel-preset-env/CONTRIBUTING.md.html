<!DOCTYPE html>
<html>
<head>
  <title>CONTRIBUTING.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/babel-preset-env/CONTRIBUTING.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#contributing">Contributing</a>
      </div>

      <div class="heading h2">
        <a href="#adding-a-new-plugin-to-support-when-approved-in-the-next-ecmascript-version">Adding a new plugin to support (when approved in the next ECMAScript version)</a>
      </div>

      <div class="heading h3">
        <a href="#update-plugin-features.js">Update plugin-features.js</a>
      </div>

      <div class="heading h3">
        <a href="#update-built-in-features.js">Update built-in-features.js</a>
      </div>

      <div class="heading h3">
        <a href="#update-plugins.json">Update plugins.json</a>
      </div>

      <div class="heading h2">
        <a href="#tests">Tests</a>
      </div>

      <div class="heading h3">
        <a href="#running-tests-locally">Running tests locally</a>
      </div>

      <div class="heading h3">
        <a href="#checking-code-coverage-locally">Checking code coverage locally</a>
      </div>

      <div class="heading h3">
        <a href="#writing-tests">Writing tests</a>
      </div>

      <div class="heading h4">
        <a href="#general">General</a>
      </div>

      <div class="heading h4">
        <a href="#testing-the-debug-option">Testing the debug option</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="contributing">
  <h1>
    <a href="#contributing" name="contributing" class="pilcrow"></a>
Contributing
  </h1>
</div>
<div class="pilwrap" id="adding-a-new-plugin-to-support-when-approved-in-the-next-ecmascript-version">
  <h2>
    <a href="#adding-a-new-plugin-to-support-when-approved-in-the-next-ecmascript-version" name="adding-a-new-plugin-to-support-when-approved-in-the-next-ecmascript-version" class="pilcrow"></a>
Adding a new plugin to support (when approved in the next ECMAScript version)
  </h2>
</div>
<div class="pilwrap" id="update-plugin-features.js">
  <h3>
    <a href="#update-plugin-features.js" name="update-plugin-features.js" class="pilcrow"></a>
Update <a href="https://github.com/babel/babel-preset-env/blob/master/data/plugin-features.js"><code>plugin-features.js</code></a>
  </h3>
</div>
<p><em>Example:</em></p>
<p>If you were going to add <code>**</code> which is in ES2016:</p>
<p>Find the relevant entries on <a href="https://kangax.github.io/compat-table/es2016plus/#test-exponentiation_(**)_operator">compat-table</a>:</p>
<p><code>exponentiation (**) operator</code></p>
<p>Find the corresponding babel plugin:</p>
<p><code>transform-exponentiation-operator</code></p>
<p>And add them in this structure:</p>
<pre><code class="js"><span class="hljs-comment">// es2016</span>
<span class="hljs-string">"transform-exponentiation-operator"</span>: {
  <span class="hljs-attr">features</span>: [
    <span class="hljs-string">"exponentiation (**) operator"</span>,
  ],
},
</code></pre>
<div class="pilwrap" id="update-built-in-features.js">
  <h3>
    <a href="#update-built-in-features.js" name="update-built-in-features.js" class="pilcrow"></a>
Update <a href="https://github.com/babel/babel-preset-env/blob/master/data/built-in-features.js"><code>built-in-features.js</code></a>
  </h3>
</div>
<p><em>Example:</em></p>
<p>In case you want to add <code>Object.values</code> which is in ES2017:</p>
<p>Find the relevant feature and subfeature on <a href="https://kangax.github.io/compat-table/es2016plus/#test-Object_static_methods_Object.values">compat-table</a>
and split it with <code>/</code>:</p>
<p><code>Object static methods / Object.values</code></p>
<p>Find the corresponding module on <a href="https://github.com/zloirock/core-js/tree/master/modules">core-js</a>:</p>
<p><code>es7.object.values.js</code></p>
<p>Find required ES version in <a href="https://github.com/babel/babel-preset-env/blob/master/data/built-in-features.js"><code>built-in-features.js</code></a> and add the new feature:</p>
<pre><code class="js"><span class="hljs-keyword">const</span> es2017 = {
  <span class="hljs-comment">//...</span>
  <span class="hljs-string">"es7.object.values"</span>: <span class="hljs-string">"Object static methods / Object.values"</span>
}
</code></pre>
<div class="pilwrap" id="update-plugins.json">
  <h3>
    <a href="#update-plugins.json" name="update-plugins.json" class="pilcrow"></a>
Update <a href="https://github.com/babel/babel-preset-env/blob/master/data/plugins.json"><code>plugins.json</code></a>
  </h3>
</div>
<p>Until <code>compat-table</code> is a standalone npm module for data we are using the git url</p>
<p><code>&quot;compat-table&quot;: &quot;kangax/compat-table#[latest-commit-hash]&quot;</code>,</p>
<p>So we update and then run <code>npm run build-data</code>. If there are no changes, then <code>plugins.json</code> will be the same.</p>
<div class="pilwrap" id="tests">
  <h2>
    <a href="#tests" name="tests" class="pilcrow"></a>
Tests
  </h2>
</div>
<div class="pilwrap" id="running-tests-locally">
  <h3>
    <a href="#running-tests-locally" name="running-tests-locally" class="pilcrow"></a>
Running tests locally
  </h3>
</div>
<pre><code class="bash">npm <span class="hljs-built_in">test</span>
</code></pre>
<div class="pilwrap" id="checking-code-coverage-locally">
  <h3>
    <a href="#checking-code-coverage-locally" name="checking-code-coverage-locally" class="pilcrow"></a>
Checking code coverage locally
  </h3>
</div>
<pre><code class="bash">npm run coverage
</code></pre>
<div class="pilwrap" id="writing-tests">
  <h3>
    <a href="#writing-tests" name="writing-tests" class="pilcrow"></a>
Writing tests
  </h3>
</div>
<div class="pilwrap" id="general">
  <h4>
    <a href="#general" name="general" class="pilcrow"></a>
General
  </h4>
</div>
<p>All the tests for <code>babel-preset-env</code> exist in the <code>test/fixtures</code> folder. The
test setup and conventions are exactly the same as testing a Babel plugin, so
please read our <a href="https://github.com/babel/babel/blob/master/CONTRIBUTING.md#babel-plugin-x">documentation on writing tests</a>.</p>
<div class="pilwrap" id="testing-the-debug-option">
  <h4>
    <a href="#testing-the-debug-option" name="testing-the-debug-option" class="pilcrow"></a>
Testing the <code>debug</code> option
  </h4>
</div>
<p>Testing debug output to <code>stdout</code> is similar. Under the <code>test/debug-fixtures</code>,
create a folder with a descriptive name of your test, and add the following:</p>
<ul>
<li>Add a <code>options.json</code> file (just as the other tests, this is essentially a
<code>.babelrc</code>) with the desired test configuration (required)</li>
<li>Add a <code>stdout.txt</code> file with the expected debug output. For added
convenience, if there is no <code>stdout.txt</code> present, the test runner will
generate one for you.</li>
</ul>
</div>
  </div>
</body>
</html>
