<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/clean-css/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#">
  
  
  
  
</a>
      </div>

      <div class="heading h1">
        <a href="#node.js-version-support">Node.js version support</a>
      </div>

      <div class="heading h1">
        <a href="#install">Install</a>
      </div>

      <div class="heading h1">
        <a href="#use">Use</a>
      </div>

      <div class="heading h2">
        <a href="#important-4.0-breaking-changes">Important: 4.0 breaking changes</a>
      </div>

      <div class="heading h2">
        <a href="#whats-new-in-version-4.1">What&#39;s new in version 4.1</a>
      </div>

      <div class="heading h2">
        <a href="#constructor-options">Constructor options</a>
      </div>

      <div class="heading h2">
        <a href="#compatibility-modes">Compatibility modes</a>
      </div>

      <div class="heading h2">
        <a href="#fetch-option">Fetch option</a>
      </div>

      <div class="heading h2">
        <a href="#formatting-options">Formatting options</a>
      </div>

      <div class="heading h2">
        <a href="#inlining-options">Inlining options</a>
      </div>

      <div class="heading h2">
        <a href="#optimization-levels">Optimization levels</a>
      </div>

      <div class="heading h3">
        <a href="#level-0-optimizations">Level 0 optimizations</a>
      </div>

      <div class="heading h3">
        <a href="#level-1-optimizations">Level 1 optimizations</a>
      </div>

      <div class="heading h3">
        <a href="#level-2-optimizations">Level 2 optimizations</a>
      </div>

      <div class="heading h2">
        <a href="#minify-method">Minify method</a>
      </div>

      <div class="heading h2">
        <a href="#promise-interface">Promise interface</a>
      </div>

      <div class="heading h2">
        <a href="#cli-utility">CLI utility</a>
      </div>

      <div class="heading h1">
        <a href="#faq">FAQ</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-optimize-multiple-files">How to optimize multiple files?</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-process-remote-@imports-correctly">How to process remote @imports correctly?</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-apply-arbitrary-transformations-to-css-properties">How to apply arbitrary transformations to CSS properties?</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-specify-a-custom-rounding-precision">How to specify a custom rounding precision?</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-preserve-a-comment-block">How to preserve a comment block?</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-rebase-relative-image-urls">How to rebase relative image URLs?</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-work-with-source-maps">How to work with source maps?</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-apply-level-1-and-2-optimizations-at-the-same-time">How to apply level 1 &amp;amp; 2 optimizations at the same time?</a>
      </div>

      <div class="heading h2">
        <a href="#what-level-2-optimizations-do">What level 2 optimizations do?</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-use-clean-css-with-build-tools">How to use clean-css with build tools?</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-use-clean-css-from-web-browser">How to use clean-css from web browser?</a>
      </div>

      <div class="heading h1">
        <a href="#contributing">Contributing</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-get-started">How to get started?</a>
      </div>

      <div class="heading h1">
        <a href="#acknowledgments">Acknowledgments</a>
      </div>

      <div class="heading h1">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="">
  <h1 align="center">
    <a href="#" name="" class="pilcrow"></a>

  <br/>
  <img src="https://cdn.rawgit.com/jakubpawlowicz/clean-css/master/logo.v2.svg" alt="clean-css logo" width="525px"/>
  <br/>
  <br/>

  </h1>
</div>
<p><a href="https://www.npmjs.com/package/clean-css"><img src="https://img.shields.io/npm/v/clean-css.svg?style=flat" alt="NPM version"></a>
<a href="https://travis-ci.org/jakubpawlowicz/clean-css"><img src="https://img.shields.io/travis/jakubpawlowicz/clean-css/master.svg?style=flat&amp;label=Linux%20build" alt="Linux Build Status"></a>
<a href="https://ci.appveyor.com/project/jakubpawlowicz/clean-css/branch/master"><img src="https://img.shields.io/appveyor/ci/jakubpawlowicz/clean-css/master.svg?style=flat&amp;label=Windows%20build" alt="Windows Build status"></a>
<a href="https://david-dm.org/jakubpawlowicz/clean-css"><img src="https://img.shields.io/david/jakubpawlowicz/clean-css.svg?style=flat" alt="Dependency Status"></a>
<a href="https://www.npmjs.com/package/clean-css"><img src="https://img.shields.io/npm/dm/clean-css.svg" alt="NPM Downloads"></a>
<a href="https://twitter.com/cleancss"><img src="https://img.shields.io/badge/Twitter-@cleancss-blue.svg" alt="Twitter"></a></p>
<p>clean-css is a fast and efficient CSS optimizer for <a href="http://nodejs.org/">Node.js</a> platform and <a href="https://jakubpawlowicz.github.io/clean-css">any modern browser</a>.</p>
<p>According to <a href="http://goalsmashers.github.io/css-minification-benchmark/">tests</a> it is one of the best available.</p>
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#nodejs-version-support.html">Node.js version support</a></li>
<li><a href="#install.html">Install</a></li>
<li><a href="#use.html">Use</a>
<ul>
<li><a href="#important-40-breaking-changes.html">Important: 4.0 breaking changes</a></li>
<li><a href="#whats-new-in-version-41.html">What's new in version 4.1</a></li>
<li><a href="#constructor-options.html">Constructor options</a></li>
<li><a href="#compatibility-modes.html">Compatibility modes</a></li>
<li><a href="#fetch-option.html">Fetch option</a></li>
<li><a href="#formatting-options.html">Formatting options</a></li>
<li><a href="#inlining-options.html">Inlining options</a></li>
<li><a href="#optimization-levels.html">Optimization levels</a>
<ul>
<li><a href="#level-0-optimizations.html">Level 0 optimizations</a></li>
<li><a href="#level-1-optimizations.html">Level 1 optimizations</a></li>
<li><a href="#level-2-optimizations.html">Level 2 optimizations</a></li>
</ul>
</li>
<li><a href="#minify-method.html">Minify method</a></li>
<li><a href="#promise-interface.html">Promise interface</a></li>
<li><a href="#cli-utility.html">CLI utility</a></li>
</ul>
</li>
<li><a href="#faq.html">FAQ</a>
<ul>
<li><a href="#how-to-optimize-multiple-files.html">How to optimize multiple files?</a></li>
<li><a href="#how-to-process-remote-imports-correctly.html">How to process remote <code>@import</code>s correctly?</a></li>
<li><a href="#how-to-apply-arbitrary-transformations-to-css-properties.html">How to apply arbitrary transformations to CSS properties?</a></li>
<li><a href="#how-to-specify-a-custom-rounding-precision.html">How to specify a custom rounding precision?</a></li>
<li><a href="#how-to-preserve-a-comment-block.html">How to preserve a comment block?</a></li>
<li><a href="#how-to-rebase-relative-image-urls.html">How to rebase relative image URLs?</a></li>
<li><a href="#how-to-work-with-source-maps.html">How to work with source maps?</a></li>
<li><a href="#how-to-apply-level-1--2-optimizations-at-the-same-time.html">How to apply level 1 &amp; 2 optimizations at the same time?</a></li>
<li><a href="#what-level-2-optimizations-do.html">What level 2 optimizations do?</a></li>
<li><a href="#how-to-use-clean-css-with-build-tools.html">How to use clean-css with build tools?</a></li>
<li><a href="#how-to-use-clean-css-from-web-browser.html">How to use clean-css from web browser?</a></li>
</ul>
</li>
<li><a href="#contributing.html">Contributing</a>
<ul>
<li><a href="#how-to-get-started.html">How to get started?</a></li>
</ul>
</li>
<li><a href="#acknowledgments.html">Acknowledgments</a></li>
<li><a href="#license.html">License</a></li>
</ul>
<div class="pilwrap" id="node.js-version-support">
  <h1>
    <a href="#node.js-version-support" name="node.js-version-support" class="pilcrow"></a>
Node.js version support
  </h1>
</div>
<p>clean-css requires Node.js 4.0+ (tested on Linux, OS X, and Windows)</p>
<div class="pilwrap" id="install">
  <h1>
    <a href="#install" name="install" class="pilcrow"></a>
Install
  </h1>
</div>
<pre><code>npm install clean-css
</code></pre>
<div class="pilwrap" id="use">
  <h1>
    <a href="#use" name="use" class="pilcrow"></a>
Use
  </h1>
</div>
<pre><code class="js"><span class="hljs-keyword">var</span> CleanCSS = <span class="hljs-built_in">require</span>(<span class="hljs-string">'clean-css'</span>);
<span class="hljs-keyword">var</span> input = <span class="hljs-string">'a{font-weight:bold;}'</span>;
<span class="hljs-keyword">var</span> options = { <span class="hljs-comment">/* options */</span> };
<span class="hljs-keyword">var</span> output = <span class="hljs-keyword">new</span> CleanCSS(options).minify(input);
</code></pre>
<div class="pilwrap" id="important-4.0-breaking-changes">
  <h2>
    <a href="#important-4.0-breaking-changes" name="important-4.0-breaking-changes" class="pilcrow"></a>
Important: 4.0 breaking changes
  </h2>
</div>
<p>clean-css 4.0 introduces some breaking changes:</p>
<ul>
<li>API and CLI interfaces are split, so API stays in this repository while CLI moves to <a href="https://github.com/jakubpawlowicz/clean-css-cli">clean-css-cli</a>;</li>
<li><code>root</code>, <code>relativeTo</code>, and <code>target</code> options are replaced by a single <code>rebaseTo</code> option - this means that rebasing URLs and import inlining is much simpler but may not be (YMMV) as powerful as in 3.x;</li>
<li><code>debug</code> option is gone as stats are always provided in output object under <code>stats</code> property;</li>
<li><code>roundingPrecision</code> is disabled by default;</li>
<li><code>roundingPrecision</code> applies to <strong>all</strong> units now, not only <code>px</code> as in 3.x;</li>
<li><code>processImport</code> and <code>processImportFrom</code> are merged into <code>inline</code> option which defaults to <code>local</code>. Remote <code>@import</code> rules are <strong>NOT</strong> inlined by default anymore;</li>
<li>splits <code>inliner: { request: ..., timeout: ... }</code> option into <code>inlineRequest</code> and <code>inlineTimeout</code> options;</li>
<li>remote resources without a protocol, e.g. <code>//fonts.googleapis.com/css?family=Domine:700</code>, are not inlined anymore;</li>
<li>changes default Internet Explorer compatibility from 9+ to 10+, to revert the old default use <code>{ compatibility: 'ie9' }</code> flag;</li>
<li>renames <code>keepSpecialComments</code> to <code>specialComments</code>;</li>
<li>moves <code>roundingPrecision</code> and <code>specialComments</code> to level 1 optimizations options, see examples;</li>
<li>moves <code>mediaMerging</code>, <code>restructuring</code>, <code>semanticMerging</code>, and <code>shorthandCompacting</code> to level 2 optimizations options, see examples below;</li>
<li>renames <code>shorthandCompacting</code> option to <code>mergeIntoShorthands</code>;</li>
<li>level 1 optimizations are the new default, up to 3.x it was level 2;</li>
<li><code>keepBreaks</code> option is replaced with <code>{ format: 'keep-breaks' }</code> to ease transition;</li>
<li><code>sourceMap</code> option has to be a boolean from now on - to specify an input source map pass it a 2nd argument to <code>minify</code> method or via a hash instead;</li>
<li><code>aggressiveMerging</code> option is removed as aggressive merging is replaced by smarter override merging.</li>
</ul>
<div class="pilwrap" id="whats-new-in-version-4.1">
  <h2>
    <a href="#whats-new-in-version-4.1" name="whats-new-in-version-4.1" class="pilcrow"></a>
What's new in version 4.1
  </h2>
</div>
<p>clean-css 4.1 introduces the following changes / features:</p>
<ul>
<li><code>inline: false</code> as an alias to <code>inline: ['none']</code>;</li>
<li><code>multiplePseudoMerging</code> compatibility flag controlling merging of rules with multiple pseudo classes / elements;</li>
<li><code>removeEmpty</code> flag in level 1 optimizations controlling removal of rules and nested blocks;</li>
<li><code>removeEmpty</code> flag in level 2 optimizations controlling removal of rules and nested blocks;</li>
<li><code>compatibility: { selectors: { mergeLimit: &lt;number&gt; } }</code> flag in compatibility settings controlling maximum number of selectors in a single rule;</li>
<li><code>minify</code> method improved signature accepting a list of hashes for a predictable traversal;</li>
<li><code>selectorsSortingMethod</code> level 1 optimization allows <code>false</code> or <code>'none'</code> for disabling selector sorting;</li>
<li><code>fetch</code> option controlling a function for handling remote requests;</li>
<li>new <code>font</code> shorthand and <code>font-*</code> longhand optimizers;</li>
<li>removal of <code>optimizeFont</code> flag in level 1 optimizations due to new <code>font</code> shorthand optimizer;</li>
<li><code>skipProperties</code> flag in level 2 optimizations controlling which properties won't be optimized;</li>
<li>new <code>animation</code> shorthand and <code>animation-*</code> longhand optimizers;</li>
<li><code>removeUnusedAtRules</code> level 2 optimization controlling removal of unused <code>@counter-style</code>, <code>@font-face</code>, <code>@keyframes</code>, and <code>@namespace</code> at rules;</li>
<li>the <a href="https://jakubpawlowicz.github.io/clean-css">web interface</a> gets an improved settings panel with &quot;reset to defaults&quot;, instant option changes, and settings being persisted across sessions.</li>
</ul>
<div class="pilwrap" id="constructor-options">
  <h2>
    <a href="#constructor-options" name="constructor-options" class="pilcrow"></a>
Constructor options
  </h2>
</div>
<p>clean-css constructor accepts a hash as a parameter with the following options available:</p>
<ul>
<li><code>compatibility</code> - controls compatibility mode used; defaults to <code>ie10+</code>; see <a href="#compatibility-modes.html">compatibility modes</a> for examples;</li>
<li><code>fetch</code> - controls a function for handling remote requests; see <a href="#fetch-option.html">fetch option</a> for examples (since 4.1.0);</li>
<li><code>format</code> - controls output CSS formatting; defaults to <code>false</code>; see <a href="#formatting-options.html">formatting options</a> for examples;</li>
<li><code>inline</code> - controls <code>@import</code> inlining rules; defaults to <code>'local'</code>; see <a href="#inlining-options.html">inlining options</a> for examples;</li>
<li><code>inlineRequest</code> - controls extra options for inlining remote <code>@import</code> rules, can be any of <a href="https://nodejs.org/api/http.html#http_http_request_options_callback">HTTP(S) request options</a>;</li>
<li><code>inlineTimeout</code> - controls number of milliseconds after which inlining a remote <code>@import</code> fails; defaults to 5000;</li>
<li><code>level</code> - controls optimization level used; defaults to <code>1</code>; see <a href="#optimization-levels.html">optimization levels</a> for examples;</li>
<li><code>rebase</code> - controls URL rebasing; defaults to <code>true</code>;</li>
<li><code>rebaseTo</code> - controls a directory to which all URLs are rebased, most likely the directory under which the output file will live; defaults to the current directory;</li>
<li><code>returnPromise</code> - controls whether <code>minify</code> method returns a Promise object or not; defaults to <code>false</code>; see <a href="#promise-interface.html">promise interface</a> for examples;</li>
<li><code>sourceMap</code> - controls whether an output source map is built; defaults to <code>false</code>;</li>
<li><code>sourceMapInlineSources</code> - controls embedding sources inside a source map's <code>sourcesContent</code> field; defaults to false.</li>
</ul>
<div class="pilwrap" id="compatibility-modes">
  <h2>
    <a href="#compatibility-modes" name="compatibility-modes" class="pilcrow"></a>
Compatibility modes
  </h2>
</div>
<p>There is a certain number of compatibility mode shortcuts, namely:</p>
<ul>
<li><code>new CleanCSS({ compatibility: '*' })</code> (default) - Internet Explorer 10+ compatibility mode</li>
<li><code>new CleanCSS({ compatibility: 'ie9' })</code> - Internet Explorer 9+ compatibility mode</li>
<li><code>new CleanCSS({ compatibility: 'ie8' })</code> - Internet Explorer 8+ compatibility mode</li>
<li><code>new CleanCSS({ compatibility: 'ie7' })</code> - Internet Explorer 7+ compatibility mode</li>
</ul>
<p>Each of these modes is an alias to a <a href="https://github.com/jakubpawlowicz/clean-css/blob/master/lib/options/compatibility.js">fine grained configuration</a>, with the following options available:</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">compatibility</span>: {
    <span class="hljs-attr">colors</span>: {
      <span class="hljs-attr">opacity</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// controls `rgba()` / `hsla()` color support</span>
    },
    <span class="hljs-attr">properties</span>: {
      <span class="hljs-attr">backgroundClipMerging</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls background-clip merging into shorthand</span>
      backgroundOriginMerging: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls background-origin merging into shorthand</span>
      backgroundSizeMerging: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls background-size merging into shorthand</span>
      colors: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls color optimizations</span>
      ieBangHack: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls keeping IE bang hack</span>
      ieFilters: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls keeping IE `filter` / `-ms-filter`</span>
      iePrefixHack: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls keeping IE prefix hack</span>
      ieSuffixHack: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls keeping IE suffix hack</span>
      merging: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls property merging based on understandability</span>
      shorterLengthUnits: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls shortening pixel units into `pc`, `pt`, or `in` units</span>
      spaceAfterClosingBrace: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls keeping space after closing brace - `url() no-repeat` into `url()no-repeat`</span>
      urlQuotes: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls keeping quoting inside `url()`</span>
      zeroUnits: <span class="hljs-literal">true</span> <span class="hljs-comment">// controls removal of units `0` value</span>
    },
    <span class="hljs-attr">selectors</span>: {
      <span class="hljs-attr">adjacentSpace</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls extra space before `nav` element</span>
      ie7Hack: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls removal of IE7 selector hacks, e.g. `*+html...`</span>
      mergeablePseudoClasses: [<span class="hljs-string">':active'</span>, ...], <span class="hljs-comment">// controls a whitelist of mergeable pseudo classes</span>
      mergeablePseudoElements: [<span class="hljs-string">'::after'</span>, ...], <span class="hljs-comment">// controls a whitelist of mergeable pseudo elements</span>
      mergeLimit: <span class="hljs-number">8191</span>, <span class="hljs-comment">// controls maximum number of selectors in a single rule (since 4.1.0)</span>
      multiplePseudoMerging: <span class="hljs-literal">true</span> <span class="hljs-comment">// controls merging of rules with multiple pseudo classes / elements (since 4.1.0)</span>
    },
    <span class="hljs-attr">units</span>: {
      <span class="hljs-attr">ch</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls treating `ch` as a supported unit</span>
      <span class="hljs-keyword">in</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls treating `in` as a supported unit</span>
      pc: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls treating `pc` as a supported unit</span>
      pt: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls treating `pt` as a supported unit</span>
      rem: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls treating `rem` as a supported unit</span>
      vh: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls treating `vh` as a supported unit</span>
      vm: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls treating `vm` as a supported unit</span>
      vmax: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls treating `vmax` as a supported unit</span>
      vmin: <span class="hljs-literal">true</span> <span class="hljs-comment">// controls treating `vmin` as a supported unit</span>
    }
  }
})
</code></pre>
<p>You can also use a string when setting a compatibility mode, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">compatibility</span>: <span class="hljs-string">'ie9,-properties.merging'</span> <span class="hljs-comment">// sets compatibility to IE9 mode with disabled property merging</span>
})
</code></pre>
<div class="pilwrap" id="fetch-option">
  <h2>
    <a href="#fetch-option" name="fetch-option" class="pilcrow"></a>
Fetch option
  </h2>
</div>
<p>The <code>fetch</code> option accepts a function which handles remote resource fetching, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">var</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">'request'</span>);
<span class="hljs-keyword">var</span> source = <span class="hljs-string">'@import url(http://example.com/path/to/stylesheet.css);'</span>;
<span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">fetch</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">uri, inlineRequest, inlineTimeout, callback</span>) </span>{
    request(uri, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, response, body</span>) </span>{
      <span class="hljs-keyword">if</span> (error) {
        callback(error, <span class="hljs-literal">null</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (response &amp;&amp; response.statusCode != <span class="hljs-number">200</span>) {
        callback(response.statusCode, <span class="hljs-literal">null</span>);
      } <span class="hljs-keyword">else</span> {
        callback(<span class="hljs-literal">null</span>, body);
      }
    });
  }
}).minify(source);
</code></pre>
<p>This option provides a convenient way of overriding the default fetching logic if it doesn't support a particular feature, say CONNECT proxies.</p>
<p>Unless given, the default <a href="https://github.com/jakubpawlowicz/clean-css/blob/master/lib/reader/load-remote-resource.js">loadRemoteResource</a> logic is used.</p>
<div class="pilwrap" id="formatting-options">
  <h2>
    <a href="#formatting-options" name="formatting-options" class="pilcrow"></a>
Formatting options
  </h2>
</div>
<p>By default output CSS is formatted without any whitespace unless a <code>format</code> option is given.
First of all there are two shorthands:</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">format</span>: <span class="hljs-string">'beautify'</span> <span class="hljs-comment">// formats output in a really nice way</span>
})
</code></pre>
<p>and</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">format</span>: <span class="hljs-string">'keep-breaks'</span> <span class="hljs-comment">// formats output the default way but adds line breaks for improved readability</span>
})
</code></pre>
<p>however <code>format</code> option also accept a fine-grained set of options:</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">format</span>: {
    <span class="hljs-attr">breaks</span>: { <span class="hljs-comment">// controls where to insert breaks</span>
      afterAtRule: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls if a line break comes after an at-rule; e.g. `@charset`; defaults to `false`</span>
      afterBlockBegins: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls if a line break comes after a block begins; e.g. `@media`; defaults to `false`</span>
      afterBlockEnds: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls if a line break comes after a block ends, defaults to `false`</span>
      afterComment: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls if a line break comes after a comment; defaults to `false`</span>
      afterProperty: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls if a line break comes after a property; defaults to `false`</span>
      afterRuleBegins: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls if a line break comes after a rule begins; defaults to `false`</span>
      afterRuleEnds: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls if a line break comes after a rule ends; defaults to `false`</span>
      beforeBlockEnds: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls if a line break comes before a block ends; defaults to `false`</span>
      betweenSelectors: <span class="hljs-literal">false</span> <span class="hljs-comment">// controls if a line break comes between selectors; defaults to `false`</span>
    },
    <span class="hljs-attr">indentBy</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// controls number of characters to indent with; defaults to `0`</span>
    indentWith: <span class="hljs-string">'space'</span>, <span class="hljs-comment">// controls a character to indent with, can be `'space'` or `'tab'`; defaults to `'space'`</span>
    spaces: { <span class="hljs-comment">// controls where to insert spaces</span>
      aroundSelectorRelation: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls if spaces come around selector relations; e.g. `div &gt; a`; defaults to `false`</span>
      beforeBlockBegins: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls if a space comes before a block begins; e.g. `.block {`; defaults to `false`</span>
      beforeValue: <span class="hljs-literal">false</span> <span class="hljs-comment">// controls if a space comes before a value; e.g. `width: 1rem`; defaults to `false`</span>
    },
    <span class="hljs-attr">wrapAt</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// controls maximum line length; defaults to `false`</span>
  }
})
</code></pre>
<div class="pilwrap" id="inlining-options">
  <h2>
    <a href="#inlining-options" name="inlining-options" class="pilcrow"></a>
Inlining options
  </h2>
</div>
<p><code>inline</code> option whitelists which <code>@import</code> rules will be processed, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">inline</span>: [<span class="hljs-string">'local'</span>] <span class="hljs-comment">// default; enables local inlining only</span>
})
</code></pre>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">inline</span>: [<span class="hljs-string">'none'</span>] <span class="hljs-comment">// disables all inlining</span>
})
</code></pre>
<pre><code class="js"><span class="hljs-comment">// introduced in clean-css 4.1.0</span>

<span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">inline</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// disables all inlining (alias to `['none']`)</span>
})
</code></pre>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">inline</span>: [<span class="hljs-string">'all'</span>] <span class="hljs-comment">// enables all inlining, same as ['local', 'remote']</span>
})
</code></pre>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">inline</span>: [<span class="hljs-string">'local'</span>, <span class="hljs-string">'mydomain.example.com'</span>] <span class="hljs-comment">// enables local inlining plus given remote source</span>
})
</code></pre>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">inline</span>: [<span class="hljs-string">'local'</span>, <span class="hljs-string">'remote'</span>, <span class="hljs-string">'!fonts.googleapis.com'</span>] <span class="hljs-comment">// enables all inlining but from given remote source</span>
})
</code></pre>
<div class="pilwrap" id="optimization-levels">
  <h2>
    <a href="#optimization-levels" name="optimization-levels" class="pilcrow"></a>
Optimization levels
  </h2>
</div>
<p>The <code>level</code> option can be either <code>0</code>, <code>1</code> (default), or <code>2</code>, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">level</span>: <span class="hljs-number">2</span>
})
</code></pre>
<p>or a fine-grained configuration given via a hash.</p>
<p>Please note that level 1 optimization options are generally safe while level 2 optimizations should be safe for most users.</p>
<div class="pilwrap" id="level-0-optimizations">
  <h3>
    <a href="#level-0-optimizations" name="level-0-optimizations" class="pilcrow"></a>
Level 0 optimizations
  </h3>
</div>
<p>Level 0 optimizations simply means &quot;no optimizations&quot;. Use it when you'd like to inline imports and / or rebase URLs but skip everything else.</p>
<div class="pilwrap" id="level-1-optimizations">
  <h3>
    <a href="#level-1-optimizations" name="level-1-optimizations" class="pilcrow"></a>
Level 1 optimizations
  </h3>
</div>
<p>Level 1 optimizations (default) operate on single properties only, e.g. can remove units when not required, turn rgb colors to a shorter hex representation, remove comments, etc</p>
<p>Here is a full list of available options:</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">level</span>: {
    <span class="hljs-number">1</span>: {
      <span class="hljs-attr">cleanupCharsets</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls `@charset` moving to the front of a stylesheet; defaults to `true`</span>
      normalizeUrls: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls URL normalization; defaults to `true`</span>
      optimizeBackground: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls `background` property optimizations; defaults to `true`</span>
      optimizeBorderRadius: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls `border-radius` property optimizations; defaults to `true`</span>
      optimizeFilter: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls `filter` property optimizations; defaults to `true`</span>
      optimizeFont: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls `font` property optimizations; defaults to `true`</span>
      optimizeFontWeight: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls `font-weight` property optimizations; defaults to `true`</span>
      optimizeOutline: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls `outline` property optimizations; defaults to `true`</span>
      removeEmpty: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls removing empty rules and nested blocks; defaults to `true`</span>
      removeNegativePaddings: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls removing negative paddings; defaults to `true`</span>
      removeQuotes: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls removing quotes when unnecessary; defaults to `true`</span>
      removeWhitespace: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls removing unused whitespace; defaults to `true`</span>
      replaceMultipleZeros: <span class="hljs-literal">true</span>, <span class="hljs-comment">// contols removing redundant zeros; defaults to `true`</span>
      replaceTimeUnits: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls replacing time units with shorter values; defaults to `true`</span>
      replaceZeroUnits: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls replacing zero values with units; defaults to `true`</span>
      roundingPrecision: <span class="hljs-literal">false</span>, <span class="hljs-comment">// rounds pixel values to `N` decimal places; `false` disables rounding; defaults to `false`</span>
      selectorsSortingMethod: <span class="hljs-string">'standard'</span>, <span class="hljs-comment">// denotes selector sorting method; can be `'natural'` or `'standard'`, `'none'`, or false (the last two since 4.1.0); defaults to `'standard'`</span>
      specialComments: <span class="hljs-string">'all'</span>, <span class="hljs-comment">// denotes a number of /*! ... */ comments preserved; defaults to `all`</span>
      tidyAtRules: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls at-rules (e.g. `@charset`, `@import`) optimizing; defaults to `true`</span>
      tidyBlockScopes: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls block scopes (e.g. `@media`) optimizing; defaults to `true`</span>
      tidySelectors: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls selectors optimizing; defaults to `true`,</span>
      transform: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{} <span class="hljs-comment">// defines a callback for fine-grained property optimization; defaults to no-op</span>
    }
  }
});
</code></pre>
<p>There is an <code>all</code> shortcut for toggling all options at the same time, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">level</span>: {
    <span class="hljs-number">1</span>: {
      <span class="hljs-attr">all</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// set all values to `false`</span>
      tidySelectors: <span class="hljs-literal">true</span> <span class="hljs-comment">// turns on optimizing selectors</span>
    }
  }
});
</code></pre>
<div class="pilwrap" id="level-2-optimizations">
  <h3>
    <a href="#level-2-optimizations" name="level-2-optimizations" class="pilcrow"></a>
Level 2 optimizations
  </h3>
</div>
<p>Level 2 optimizations operate at rules or multiple properties level, e.g. can remove duplicate rules, remove properties redefined further down a stylesheet, or restructure rules by moving them around.</p>
<p>Please note that if level 2 optimizations are turned on then, unless explicitely disabled, level 1 optimizations are applied as well.</p>
<p>Here is a full list of available options:</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">level</span>: {
    <span class="hljs-number">2</span>: {
      <span class="hljs-attr">mergeAdjacentRules</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls adjacent rules merging; defaults to true</span>
      mergeIntoShorthands: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls merging properties into shorthands; defaults to true</span>
      mergeMedia: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls `@media` merging; defaults to true</span>
      mergeNonAdjacentRules: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls non-adjacent rule merging; defaults to true</span>
      mergeSemantically: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls semantic merging; defaults to false</span>
      overrideProperties: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls property overriding based on understandability; defaults to true</span>
      removeEmpty: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls removing empty rules and nested blocks; defaults to `true`</span>
      reduceNonAdjacentRules: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls non-adjacent rule reducing; defaults to true</span>
      removeDuplicateFontRules: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls duplicate `@font-face` removing; defaults to true</span>
      removeDuplicateMediaBlocks: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls duplicate `@media` removing; defaults to true</span>
      removeDuplicateRules: <span class="hljs-literal">true</span>, <span class="hljs-comment">// controls duplicate rules removing; defaults to true</span>
      removeUnusedAtRules: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls unused at rule removing; defaults to false (available since 4.1.0)</span>
      restructureRules: <span class="hljs-literal">false</span>, <span class="hljs-comment">// controls rule restructuring; defaults to false</span>
      skipProperties: [] <span class="hljs-comment">// controls which properties won't be optimized, defaults to `[]` which means all will be optimized (since 4.1.0)</span>
    }
  }
});
</code></pre>
<p>There is an <code>all</code> shortcut for toggling all options at the same time, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">level</span>: {
    <span class="hljs-number">2</span>: {
      <span class="hljs-attr">all</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// sets all values to `false`</span>
      removeDuplicateRules: <span class="hljs-literal">true</span> <span class="hljs-comment">// turns on removing duplicate rules</span>
    }
  }
});
</code></pre>
<div class="pilwrap" id="minify-method">
  <h2>
    <a href="#minify-method" name="minify-method" class="pilcrow"></a>
Minify method
  </h2>
</div>
<p>Once configured clean-css provides a <code>minify</code> method to optimize a given CSS, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">var</span> output = <span class="hljs-keyword">new</span> CleanCSS(options).minify(source);
</code></pre>
<p>The output of the <code>minify</code> method is a hash with following fields:</p>
<pre><code class="js"><span class="hljs-built_in">console</span>.log(output.styles); <span class="hljs-comment">// optimized output CSS as a string</span>
<span class="hljs-built_in">console</span>.log(output.sourceMap); <span class="hljs-comment">// output source map if requested with `sourceMap` option</span>
<span class="hljs-built_in">console</span>.log(output.errors); <span class="hljs-comment">// a list of errors raised</span>
<span class="hljs-built_in">console</span>.log(output.warnings); <span class="hljs-comment">// a list of warnings raised</span>
<span class="hljs-built_in">console</span>.log(output.stats.originalSize); <span class="hljs-comment">// original content size after import inlining</span>
<span class="hljs-built_in">console</span>.log(output.stats.minifiedSize); <span class="hljs-comment">// optimized content size</span>
<span class="hljs-built_in">console</span>.log(output.stats.timeSpent); <span class="hljs-comment">// time spent on optimizations in milliseconds</span>
<span class="hljs-built_in">console</span>.log(output.stats.efficiency); <span class="hljs-comment">// `(originalSize - minifiedSize) / originalSize`, e.g. 0.25 if size is reduced from 100 bytes to 75 bytes</span>
</code></pre>
<p>The <code>minify</code> method also accepts an input source map, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">var</span> output = <span class="hljs-keyword">new</span> CleanCSS(options).minify(source, inputSourceMap);
</code></pre>
<p>or a callback invoked when optimizations are finished, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS(options).minify(source, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, output</span>) </span>{
  <span class="hljs-comment">// `output` is the same as in the synchronous call above</span>
});
</code></pre>
<div class="pilwrap" id="promise-interface">
  <h2>
    <a href="#promise-interface" name="promise-interface" class="pilcrow"></a>
Promise interface
  </h2>
</div>
<p>If you prefer clean-css to return a Promise object then you need to explicitely ask for it, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({ <span class="hljs-attr">returnPromise</span>: <span class="hljs-literal">true</span> })
  .minify(source)
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">output</span>) </span>{ <span class="hljs-built_in">console</span>.log(output.styles); })
  .catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>{ <span class="hljs-comment">// deal with errors });</span>
</code></pre>
<div class="pilwrap" id="cli-utility">
  <h2>
    <a href="#cli-utility" name="cli-utility" class="pilcrow"></a>
CLI utility
  </h2>
</div>
<p>Clean-css has an associated command line utility that can be installed separately using <code>npm install clean-css-cli</code>. For more detailed information, please visit https://github.com/jakubpawlowicz/clean-css-cli.</p>
<div class="pilwrap" id="faq">
  <h1>
    <a href="#faq" name="faq" class="pilcrow"></a>
FAQ
  </h1>
</div>
<div class="pilwrap" id="how-to-optimize-multiple-files">
  <h2>
    <a href="#how-to-optimize-multiple-files" name="how-to-optimize-multiple-files" class="pilcrow"></a>
How to optimize multiple files?
  </h2>
</div>
<p>It can be done either by passing an array of paths, or, when sources are already available, a hash or an array of hashes:</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS().minify([<span class="hljs-string">'path/to/file/one'</span>, <span class="hljs-string">'path/to/file/two'</span>]);
</code></pre>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS().minify({
  <span class="hljs-string">'path/to/file/one'</span>: {
    <span class="hljs-attr">styles</span>: <span class="hljs-string">'contents of file one'</span>
  },
  <span class="hljs-string">'path/to/file/two'</span>: {
    <span class="hljs-attr">styles</span>: <span class="hljs-string">'contents of file two'</span>
  }
});
</code></pre>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS().minify([
  {<span class="hljs-string">'path/to/file/one'</span>: {<span class="hljs-attr">styles</span>: <span class="hljs-string">'contents of file one'</span>}},
  {<span class="hljs-string">'path/to/file/two'</span>: {<span class="hljs-attr">styles</span>: <span class="hljs-string">'contents of file two'</span>}}
]);
</code></pre>
<p>Passing an array of hashes allows you to explicitly specify the order in which the input files are concatenated. Whereas when you use a single hash the order is determined by the <a href="http://2ality.com/2015/10/property-traversal-order-es6.html">traversal order of object properties</a> - available since 4.1.0.</p>
<p>Important note - any <code>@import</code> rules already present in the hash will be resolved in memory.</p>
<div class="pilwrap" id="how-to-process-remote-@imports-correctly">
  <h2>
    <a href="#how-to-process-remote-@imports-correctly" name="how-to-process-remote-@imports-correctly" class="pilcrow"></a>
How to process remote <code>@import</code>s correctly?
  </h2>
</div>
<p>In order to inline remote <code>@import</code> statements you need to provide a callback to minify method as fetching remote assets is an asynchronous operation, e.g.:</p>
<pre><code class="js"><span class="hljs-keyword">var</span> source = <span class="hljs-string">'@import url(http://example.com/path/to/remote/styles);'</span>;
<span class="hljs-keyword">new</span> CleanCSS({ <span class="hljs-attr">inline</span>: [<span class="hljs-string">'remote'</span>] }).minify(source, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, output</span>) </span>{
  <span class="hljs-comment">// output.styles</span>
});
</code></pre>
<p>If you don't provide a callback, then remote <code>@import</code>s will be left as is.</p>
<div class="pilwrap" id="how-to-apply-arbitrary-transformations-to-css-properties">
  <h2>
    <a href="#how-to-apply-arbitrary-transformations-to-css-properties" name="how-to-apply-arbitrary-transformations-to-css-properties" class="pilcrow"></a>
How to apply arbitrary transformations to CSS properties?
  </h2>
</div>
<p>If clean-css doesn't perform a particular property optimization, you can use <code>transform</code> callback to apply it:</p>
<pre><code class="js">var source = '.block{background-image:url(/path/to/image.png)}';
var output = new CleanCSS({
  level: {
    1: {
      transform: function (propertyName, propertyValue) {
        if (propertyName == 'background-image' &amp;&amp; propertyValue.indexOf('/path/to') &gt; -1) {
          return propertyValue.replace('/path/to', '../valid/path/to');
        }
      }
    }
  }
}).minify(source);

console.log(output.styles); # =&gt; .block{background-image:url(../valid/path/to/image.png)}
</code></pre>
<p>Note: returning <code>false</code> from <code>transform</code> callback will drop a property.</p>
<div class="pilwrap" id="how-to-specify-a-custom-rounding-precision">
  <h2>
    <a href="#how-to-specify-a-custom-rounding-precision" name="how-to-specify-a-custom-rounding-precision" class="pilcrow"></a>
How to specify a custom rounding precision?
  </h2>
</div>
<p>The level 1 <code>roundingPrecision</code> optimization option accept a string with per-unit rounding precision settings, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">level</span>: {
    <span class="hljs-number">1</span>: {
      <span class="hljs-attr">roundingPrecision</span>: <span class="hljs-string">'all=3,px=5'</span>
    }
  }
}).minify(source)
</code></pre>
<p>which sets all units rounding precision to 3 digits except <code>px</code> unit precision of 5 digits.</p>
<div class="pilwrap" id="how-to-preserve-a-comment-block">
  <h2>
    <a href="#how-to-preserve-a-comment-block" name="how-to-preserve-a-comment-block" class="pilcrow"></a>
How to preserve a comment block?
  </h2>
</div>
<p>Use the <code>/*!</code> notation instead of the standard one <code>/*</code>:</p>
<pre><code class="css"><span class="hljs-comment">/*!
  Important comments included in optimized output.
*/</span>
</code></pre>
<div class="pilwrap" id="how-to-rebase-relative-image-urls">
  <h2>
    <a href="#how-to-rebase-relative-image-urls" name="how-to-rebase-relative-image-urls" class="pilcrow"></a>
How to rebase relative image URLs?
  </h2>
</div>
<p>clean-css will handle it automatically for you in the following cases:</p>
<ul>
<li>when full paths to input files are passed in as options;</li>
<li>when correct paths are passed in via a hash;</li>
<li>when <code>rebaseTo</code> is used with any of above two.</li>
</ul>
<div class="pilwrap" id="how-to-work-with-source-maps">
  <h2>
    <a href="#how-to-work-with-source-maps" name="how-to-work-with-source-maps" class="pilcrow"></a>
How to work with source maps?
  </h2>
</div>
<p>To generate a source map, use <code>sourceMap: true</code> option, e.g.:</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({ <span class="hljs-attr">sourceMap</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">rebaseTo</span>: pathToOutputDirectory })
  .minify(source, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, output</span>) </span>{
    <span class="hljs-comment">// access output.sourceMap for SourceMapGenerator object</span>
    <span class="hljs-comment">// see https://github.com/mozilla/source-map/#sourcemapgenerator for more details</span>
});
</code></pre>
<p>You can also pass an input source map directly as a 2nd argument to <code>minify</code> method:</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({ <span class="hljs-attr">sourceMap</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">rebaseTo</span>: pathToOutputDirectory })
  .minify(source, inputSourceMap, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, output</span>) </span>{
    <span class="hljs-comment">// access output.sourceMap to access SourceMapGenerator object</span>
    <span class="hljs-comment">// see https://github.com/mozilla/source-map/#sourcemapgenerator for more details</span>
});
</code></pre>
<p>or even multiple input source maps at once:</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({ <span class="hljs-attr">sourceMap</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">rebaseTo</span>: pathToOutputDirectory }).minify({
  <span class="hljs-string">'path/to/source/1'</span>: {
    <span class="hljs-attr">styles</span>: <span class="hljs-string">'...styles...'</span>,
    <span class="hljs-attr">sourceMap</span>: <span class="hljs-string">'...source-map...'</span>
  },
  <span class="hljs-string">'path/to/source/2'</span>: {
    <span class="hljs-attr">styles</span>: <span class="hljs-string">'...styles...'</span>,
    <span class="hljs-attr">sourceMap</span>: <span class="hljs-string">'...source-map...'</span>
  }
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, output</span>) </span>{
  <span class="hljs-comment">// access output.sourceMap as above</span>
});
</code></pre>
<div class="pilwrap" id="how-to-apply-level-1-and-2-optimizations-at-the-same-time">
  <h2>
    <a href="#how-to-apply-level-1-and-2-optimizations-at-the-same-time" name="how-to-apply-level-1-and-2-optimizations-at-the-same-time" class="pilcrow"></a>
How to apply level 1 &amp; 2 optimizations at the same time?
  </h2>
</div>
<p>Using the hash configuration specifying both optimization levels, e.g.</p>
<pre><code class="js"><span class="hljs-keyword">new</span> CleanCSS({
  <span class="hljs-attr">level</span>: {
    <span class="hljs-number">1</span>: {
      <span class="hljs-attr">all</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">normalizeUrls</span>: <span class="hljs-literal">false</span>
    },
    <span class="hljs-number">2</span>: {
      <span class="hljs-attr">restructureRules</span>: <span class="hljs-literal">true</span>
    }
  }
})
</code></pre>
<p>will apply level 1 optimizations, except url normalization, and default level 2 optimizations with rule restructuring.</p>
<div class="pilwrap" id="what-level-2-optimizations-do">
  <h2>
    <a href="#what-level-2-optimizations-do" name="what-level-2-optimizations-do" class="pilcrow"></a>
What level 2 optimizations do?
  </h2>
</div>
<p>All level 2 optimizations are dispatched <a href="https://github.com/jakubpawlowicz/clean-css/blob/master/lib/optimizer/level-2/optimize.js#L67">here</a>, and this is what they do:</p>
<ul>
<li><code>recursivelyOptimizeBlocks</code> - does all the following operations on a nested block, like <code>@media</code> or <code>@keyframe</code>;</li>
<li><code>recursivelyOptimizeProperties</code> - optimizes properties in rulesets and flat at-rules, like @font-face, by splitting them into components (e.g. <code>margin</code> into <code>margin-(bottom|left|right|top)</code>), optimizing, and restoring them back. You may want to use <code>mergeIntoShorthands</code> option to control whether you want to turn multiple components into shorthands;</li>
<li><code>removeDuplicates</code> - gets rid of duplicate rulesets with exactly the same set of properties, e.g. when including a Sass / Less partial twice for no good reason;</li>
<li><code>mergeAdjacent</code> - merges adjacent rulesets with the same selector or rules;</li>
<li><code>reduceNonAdjacent</code> - identifies which properties are overridden in same-selector non-adjacent rulesets, and removes them;</li>
<li><code>mergeNonAdjacentBySelector</code> - identifies same-selector non-adjacent rulesets which can be moved (!) to be merged, requires all intermediate rulesets to not redefine the moved properties, or if redefined to have the same value;</li>
<li><code>mergeNonAdjacentByBody</code> - same as the one above but for same-selector non-adjacent rulesets;</li>
<li><code>restructure</code> - tries to reorganize different-selector different-rules rulesets so they take less space, e.g. <code>.one{padding:0}.two{margin:0}.one{margin-bottom:3px}</code> into <code>.two{margin:0}.one{padding:0;margin-bottom:3px}</code>;</li>
<li><code>removeDuplicateFontAtRules</code> - removes duplicated <code>@font-face</code> rules;</li>
<li><code>removeDuplicateMediaQueries</code> - removes duplicated <code>@media</code> nested blocks;</li>
<li><code>mergeMediaQueries</code> - merges non-adjacent <code>@media</code> at-rules by the same rules as <code>mergeNonAdjacentBy*</code> above;</li>
</ul>
<div class="pilwrap" id="how-to-use-clean-css-with-build-tools">
  <h2>
    <a href="#how-to-use-clean-css-with-build-tools" name="how-to-use-clean-css-with-build-tools" class="pilcrow"></a>
How to use clean-css with build tools?
  </h2>
</div>
<p>There is a number of 3rd party plugins to popular build tools:</p>
<ul>
<li><a href="https://github.com/broccolijs/broccoli#broccoli">Broccoli</a>: <a href="https://github.com/shinnn/broccoli-clean-css">broccoli-clean-css</a></li>
<li><a href="http://brunch.io/">Brunch</a>: <a href="https://github.com/brunch/clean-css-brunch">clean-css-brunch</a></li>
<li><a href="http://gruntjs.com">Grunt</a>: <a href="https://github.com/gruntjs/grunt-contrib-cssmin">grunt-contrib-cssmin</a></li>
<li><a href="http://gulpjs.com/">Gulp</a>: <a href="https://github.com/scniro/gulp-clean-css">gulp-clean-css</a></li>
<li><a href="http://gulpjs.com/">Gulp</a>: <a href="https://github.com/jakubpawlowicz/clean-css/issues/342">using vinyl-map as a wrapper - courtesy of @sogko</a></li>
<li><a href="https://github.com/component/builder2.js">component-builder2</a>: <a href="https://github.com/poying/builder-clean-css">builder-clean-css</a></li>
<li><a href="http://metalsmith.io">Metalsmith</a>: <a href="https://github.com/aymericbeaumet/metalsmith-clean-css">metalsmith-clean-css</a></li>
<li><a href="https://github.com/lasso-js/lasso">Lasso</a>: <a href="https://github.com/yomed/lasso-clean-css">lasso-clean-css</a></li>
<li><a href="https://github.com/start-runner/start">Start</a>: <a href="https://github.com/start-runner/clean-css">start-clean-css</a></li>
</ul>
<div class="pilwrap" id="how-to-use-clean-css-from-web-browser">
  <h2>
    <a href="#how-to-use-clean-css-from-web-browser" name="how-to-use-clean-css-from-web-browser" class="pilcrow"></a>
How to use clean-css from web browser?
  </h2>
</div>
<ul>
<li>https://jakubpawlowicz.github.io/clean-css/ (official web interface)</li>
<li>http://refresh-sf.com/</li>
<li>http://adamburgess.github.io/clean-css-online/</li>
</ul>
<div class="pilwrap" id="contributing">
  <h1>
    <a href="#contributing" name="contributing" class="pilcrow"></a>
Contributing
  </h1>
</div>
<p>See <a href="https://github.com/jakubpawlowicz/clean-css/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
<div class="pilwrap" id="how-to-get-started">
  <h2>
    <a href="#how-to-get-started" name="how-to-get-started" class="pilcrow"></a>
How to get started?
  </h2>
</div>
<p>First clone the sources:</p>
<pre><code class="bash">git <span class="hljs-built_in">clone</span> git@github.com:jakubpawlowicz/clean-css.git
</code></pre>
<p>then install dependencies:</p>
<pre><code class="bash"><span class="hljs-built_in">cd</span> clean-css
npm install
</code></pre>
<p>then use any of the following commands to verify your copy:</p>
<pre><code class="bash">npm run bench <span class="hljs-comment"># for clean-css benchmarks (see [test/bench.js](https://github.com/jakubpawlowicz/clean-css/blob/master/test/bench.js) for details)</span>
npm run browserify <span class="hljs-comment"># to create the browser-ready clean-css version</span>
npm run check <span class="hljs-comment"># to lint JS sources with [JSHint](https://github.com/jshint/jshint/)</span>
npm <span class="hljs-built_in">test</span> <span class="hljs-comment"># to run all tests</span>
</code></pre>
<div class="pilwrap" id="acknowledgments">
  <h1>
    <a href="#acknowledgments" name="acknowledgments" class="pilcrow"></a>
Acknowledgments
  </h1>
</div>
<p>Sorted alphabetically by GitHub handle:</p>
<ul>
<li><a href="https://github.com/abarre">@abarre</a> (Anthony Barre) for improvements to <code>@import</code> processing;</li>
<li><a href="https://github.com/alexlamsl">@alexlamsl</a> (Alex Lam S.L.) for testing early clean-css 4 versions, reporting bugs, and suggesting numerous improvements.</li>
<li><a href="https://github.com/altschuler">@altschuler</a> (Simon Altschuler) for fixing <code>@import</code> processing inside comments;</li>
<li><a href="https://github.com/ben-eb">@ben-eb</a> (Ben Briggs) for sharing ideas about CSS optimizations;</li>
<li><a href="https://github.com/facelessuser">@facelessuser</a> (Isaac) for pointing out a flaw in clean-css' stateless mode;</li>
<li><a href="https://github.com/grandrath">@grandrath</a> (Martin Grandrath) for improving <code>minify</code> method source traversal in ES6;</li>
<li><a href="https://github.com/jmalonzo">@jmalonzo</a> (Jan Michael Alonzo) for a patch removing node.js' old <code>sys</code> package;</li>
<li><a href="https://github.com/lukeapage">@lukeapage</a> (Luke Page) for suggestions and testing the source maps feature;
Plus everyone else involved in <a href="https://github.com/jakubpawlowicz/clean-css/issues/125">#125</a> for pushing it forward;</li>
<li><a href="https://github.com/madwizard-thomas">@madwizard-thomas</a> for sharing ideas about <code>@import</code> inlining and URL rebasing.</li>
<li><a href="https://github.com/ngyikp">@ngyikp</a> (Ng Yik Phang) for testing early clean-css 4 versions, reporting bugs, and suggesting numerous improvements.</li>
<li><a href="https://github.com/wagenet">@wagenet</a> (Peter Wagenet) for suggesting improvements to <code>@import</code> inlining behavior;</li>
<li><a href="https://github.com/venemo">@venemo</a> (Timur Kristóf) for an outstanding contribution of advanced property optimizer for 2.2 release;</li>
<li><a href="https://github.com/vvo">@vvo</a> (Vincent Voyer) for a patch with better empty element regex and for inspiring us to do many performance improvements in 0.4 release;</li>
<li><a href="https://github.com/xhmikosr">@xhmikosr</a> for suggesting new features, like option to remove special comments and strip out URLs quotation, and pointing out numerous improvements like JSHint, media queries, etc.</li>
</ul>
<div class="pilwrap" id="license">
  <h1>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h1>
</div>
<p>clean-css is released under the <a href="https://github.com/jakubpawlowicz/clean-css/blob/master/LICENSE">MIT License</a>.</p>
</div>
  </div>
</body>
</html>
