<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/browserslist/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#browserslist">Browserslist</a>
      </div>

      <div class="heading h2">
        <a href="#queries">Queries</a>
      </div>

      <div class="heading h2">
        <a href="#browsers">Browsers</a>
      </div>

      <div class="heading h3">
        <a href="#electron">Electron</a>
      </div>

      <div class="heading h2">
        <a href="#package.json">package.json</a>
      </div>

      <div class="heading h2">
        <a href="#config-file">Config File</a>
      </div>

      <div class="heading h2">
        <a href="#environments">Environments</a>
      </div>

      <div class="heading h2">
        <a href="#environment-variables">Environment Variables</a>
      </div>

      <div class="heading h2">
        <a href="#custom-usage-data">Custom Usage Data</a>
      </div>

      <div class="heading h2">
        <a href="#webpack">Webpack</a>
      </div>

      <div class="heading h2">
        <a href="#js-api">JS API</a>
      </div>

      <div class="heading h2">
        <a href="#coverage">Coverage</a>
      </div>

      <div class="heading h2">
        <a href="#internal-caches">Internal caches</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="browserslist">
  <h1>
    <a href="#browserslist" name="browserslist" class="pilcrow"></a>
Browserslist
  </h1>
</div>
<p><img align="right" width="100" height="100"
     src="http://ai.github.io/browserslist/logo.svg"
     title="Browserslist logo by Anton Lovchikov"></p>
<p>Library to share supported browsers list between different front-end tools.
It is used in:</p>
<ul>
<li><a href="https://github.com/postcss/autoprefixer">Autoprefixer</a></li>
<li><a href="https://github.com/babel/babel-preset-env">babel-preset-env</a> (no config support, only tool option)</li>
<li><a href="https://github.com/amilajack/eslint-plugin-compat">eslint-plugin-compat</a></li>
<li><a href="https://github.com/ismay/stylelint-no-unsupported-browser-features">stylelint-no-unsupported-browser-features</a></li>
<li><a href="https://github.com/jonathantneal/postcss-normalize">postcss-normalize</a></li>
</ul>
<p>All tools that rely on Browserslist will find its config automatically,
when you add the following to <code>package.json</code>:</p>
<pre><code class="json">{
  <span class="hljs-attr">"browserslist"</span>: [
    <span class="hljs-string">"&gt; 1%"</span>,
    <span class="hljs-string">"last 2 versions"</span>
  ]
}
</code></pre>
<p>Or in <code>.browserslistrc</code> config:</p>
<pre><code class="yaml"><span class="hljs-comment"># Browsers that we support</span>

<span class="hljs-string">&gt; 1%
Last 2 versions
IE 10 # sorry
</span></code></pre>
<p>Developers set browsers list in queries like <code>last 2 version</code>
to be free from updating browser versions manually.
Browserslist will use <a href="http://caniuse.com/">Can I Use</a> data for this queries.</p>
<p>Browserslist will take browsers queries from tool option,
<code>browserslist</code> config, <code>.browserslistrc</code> config,
<code>browserslist</code> section in <code>package.json</code> or environment variables.</p>
<p>You can test Browserslist queries in <a href="http://browserl.ist/">online demo</a>.</p>
<a href="https://evilmartians.com/?utm_source=browserslist">
  <img src="https://evilmartians.com/badges/sponsored-by-evil-martians.svg"
    alt="Sponsored by Evil Martians"
    width="236"
    height="54"
  \>
</a>
<div class="pilwrap" id="queries">
  <h2>
    <a href="#queries" name="queries" class="pilcrow"></a>
Queries
  </h2>
</div>
<p>Browserslist will use browsers query from one of this sources:</p>
<ol>
<li>Tool options. For example <code>browsers</code> option in Autoprefixer.</li>
<li><code>BROWSERSLIST</code> environment variable.</li>
<li><code>browserslist</code> config file in current or parent directories.</li>
<li><code>.browserslistrc</code> config file in current or parent directories.</li>
<li><code>browserslist</code> key in <code>package.json</code> file in current or parent directories.</li>
<li>If the above methods did not produce a valid result
Browserslist will use defaults: <code>&gt; 1%, last 2 versions, Firefox ESR</code>.</li>
</ol>
<p>We recommend to write queries in <code>package.json</code>.</p>
<p>You can specify the versions by queries (case insensitive):</p>
<ul>
<li><code>last 2 versions</code>: the last 2 versions for each browser.</li>
<li><code>last 2 Chrome versions</code>: the last 2 versions of Chrome browser.</li>
<li><code>last 2 major versions</code>: all minor/patch releases of the current
and previous major versions.</li>
<li><code>last 2 iOS major versions</code>: all minor/patch releases of the current
and previous major versions of iOS Safari.</li>
<li><code>&gt; 5%</code> or <code>&gt;= 5%</code>: versions selected by global usage statistics.</li>
<li><code>&gt; 5% in US</code>: uses USA usage statistics. It accepts <a href="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">two-letter country code</a>.</li>
<li><code>&gt; 5% in alt-AS</code>: uses Asia region usage statistics. List of all region codes
can be found at <a href="https://github.com/ben-eb/caniuse-lite/tree/master/data/regions"><code>caniuse-lite/data/regions</code></a>.</li>
<li><code>&gt; 5% in my stats</code>: uses <a href="#custom-usage-data.html">custom usage data</a>.</li>
<li><code>ie 6-8</code>: selects an inclusive range of versions.</li>
<li><code>Firefox &gt; 20</code>: versions of Firefox newer than 20.</li>
<li><code>Firefox &gt;= 20</code>: versions of Firefox newer than or equal to 20.</li>
<li><code>Firefox &lt; 20</code>: versions of Firefox less than 20.</li>
<li><code>Firefox &lt;= 20</code>: versions of Firefox less than or equal to 20.</li>
<li><code>Firefox ESR</code>: the latest [Firefox ESR] version.</li>
<li><code>iOS 7</code>: the iOS browser version 7 directly.</li>
<li><code>unreleased versions</code>: alpha and beta versions of each browser.</li>
<li><code>unreleased Chrome versions</code>: alpha and beta versions of Chrome browser.</li>
<li><code>not ie &lt;= 8</code>: exclude browsers selected before by previous queries.
You can add <code>not</code> to any query.</li>
</ul>
<p>Browserslist works with separated versions of browsers.
You should avoid queries like <code>Firefox &gt; 0</code>.</p>
<p>Multiple criteria are combined as a boolean <code>OR</code>. A browser version must match
at least one of the criteria to be selected.</p>
<p>All queries are based on the <a href="http://caniuse.com/">Can I Use</a> support table,
e.g. <code>last 3 iOS versions</code> might select <code>8.4, 9.2, 9.3</code> (mixed major and minor),
whereas <code>last 3 Chrome versions</code> might select <code>50, 49, 48</code> (major only).</p>
<div class="pilwrap" id="browsers">
  <h2>
    <a href="#browsers" name="browsers" class="pilcrow"></a>
Browsers
  </h2>
</div>
<p>Names are case insensitive:</p>
<ul>
<li><code>Android</code> for Android WebView.</li>
<li><code>BlackBerry</code> or <code>bb</code> for Blackberry browser.</li>
<li><code>Chrome</code> for Google Chrome.</li>
<li><code>ChromeAndroid</code> or <code>and_chr</code> for Chrome for Android</li>
<li><code>Edge</code> for Microsoft Edge.</li>
<li><code>Electron</code> for Electron framework. It will be converted to Chrome version.</li>
<li><code>Explorer</code> or <code>ie</code> for Internet Explorer.</li>
<li><code>ExplorerMobile</code> or <code>ie_mob</code> for Internet Explorer Mobile.</li>
<li><code>Firefox</code> or <code>ff</code> for Mozilla Firefox.</li>
<li><code>FirefoxAndroid</code> or <code>and_ff</code> for Firefox for Android.</li>
<li><code>iOS</code> or <code>ios_saf</code> for iOS Safari.</li>
<li><code>Opera</code> for Opera.</li>
<li><code>OperaMini</code> or <code>op_mini</code> for Opera Mini.</li>
<li><code>OperaMobile</code> or <code>op_mob</code> for Opera Mobile.</li>
<li><code>QQAndroid</code> or <code>and_qq</code> for QQ Browser for Android.</li>
<li><code>Safari</code> for desktop Safari.</li>
<li><code>Samsung</code> for Samsung Internet.</li>
<li><code>UCAndroid</code> or <code>and_uc</code> for UC Browser for Android.</li>
</ul>
<div class="pilwrap" id="electron">
  <h3>
    <a href="#electron" name="electron" class="pilcrow"></a>
Electron
  </h3>
</div>
<p><a href="https://www.npmjs.com/package/electron-to-chromium"><code>electron-to-chromium</code></a>
could return a compatible Browserslist query for your (major) Electron version:</p>
<pre><code class="js"><span class="hljs-keyword">const</span> e2c = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron-to-chromium'</span>)
autoprefixer({
    <span class="hljs-attr">browsers</span>: e2c.electronToBrowserList(<span class="hljs-string">'1.4'</span>) <span class="hljs-comment">//=&gt; "Chrome &gt;= 53"</span>
})
</code></pre>
<div class="pilwrap" id="package.json">
  <h2>
    <a href="#package.json" name="package.json" class="pilcrow"></a>
<code>package.json</code>
  </h2>
</div>
<p>If you want to reduce config files in project root, you can specify
browsers in <code>package.json</code> with <code>browserslist</code> key:</p>
<pre><code class="js">{
  <span class="hljs-string">"private"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"autoprefixer"</span>: <span class="hljs-string">"^6.5.4"</span>
  },
  <span class="hljs-string">"browserslist"</span>: [
    <span class="hljs-string">"&gt; 1%"</span>,
    <span class="hljs-string">"last 2 versions"</span>
  ]
}
</code></pre>
<div class="pilwrap" id="config-file">
  <h2>
    <a href="#config-file" name="config-file" class="pilcrow"></a>
Config File
  </h2>
</div>
<p>Browserslist config should be named <code>.browserslistrc</code> or <code>browserslist</code>
and have browsers queries split by a new line. Comments starts with <code>#</code> symbol:</p>
<pre><code class="yaml"><span class="hljs-comment"># Browsers that we support</span>

<span class="hljs-string">&gt; 1%
Last 2 versions
IE 8 # sorry
</span></code></pre>
<p>Browserslist will check config in every directory in <code>path</code>.
So, if tool process <code>app/styles/main.css</code>, you can put config to root,
<code>app/</code> or <code>app/styles</code>.</p>
<p>You can specify direct path in <code>BROWSERSLIST_CONFIG</code> environment variables.</p>
<div class="pilwrap" id="environments">
  <h2>
    <a href="#environments" name="environments" class="pilcrow"></a>
Environments
  </h2>
</div>
<p>You can also specify different browser queries for various environments.
Browserslist will choose query according to <code>BROWSERSLIST_ENV</code> or <code>NODE_ENV</code>
variables. If none of them is declared, Browserslist will firstly look
for <code>development</code> queries and then use defaults.</p>
<p>In <code>package.json</code>:</p>
<pre><code class="js">{
  …
  <span class="hljs-string">"browserslist"</span>: {
    <span class="hljs-string">"production"</span>: [
      <span class="hljs-string">"last 2 version"</span>,
      <span class="hljs-string">"ie 9"</span>
    ],
    <span class="hljs-string">"development"</span>: [
      <span class="hljs-string">"last 1 version"</span>
    ]
  }
}
</code></pre>
<p>In <code>.browserslistrc</code> config:</p>
<pre><code class="ini">[production]
last 2 version
ie 9

[development]
last 1 version
</code></pre>
<div class="pilwrap" id="environment-variables">
  <h2>
    <a href="#environment-variables" name="environment-variables" class="pilcrow"></a>
Environment Variables
  </h2>
</div>
<p>If some tool use Browserslist inside, you can change browsers settings
by <a href="https://en.wikipedia.org/wiki/Environment_variable">environment variables</a>:</p>
<ul>
<li>
<p><code>BROWSERSLIST</code> with browsers queries.</p>
<pre><code class="sh">BROWSERSLIST=<span class="hljs-string">"&gt; 5%"</span> gulp css
</code></pre>
</li>
<li>
<p><code>BROWSERSLIST_CONFIG</code> with path to config file.</p>
<pre><code class="sh">BROWSERSLIST_CONFIG=./config/browserslist gulp css
</code></pre>
</li>
<li>
<p><code>BROWSERSLIST_ENV</code> with environments string.</p>
<pre><code class="sh">BROWSERSLIST_ENV=<span class="hljs-string">"development"</span> gulp css
</code></pre>
</li>
<li>
<p><code>BROWSERSLIST_STATS</code> with path to the custom usage data
for <code>&gt; 1% in my stats</code> query.</p>
<pre><code class="sh">BROWSERSLIST_STATS=./config/usage_data.json gulp css
</code></pre>
</li>
<li>
<p><code>BROWSERSLIST_DISABLE_CACHE</code> if you want to disable config reading cache.</p>
<pre><code class="sh">BROWSERSLIST_DISABLE_CACHE=1 gulp css
</code></pre>
</li>
</ul>
<div class="pilwrap" id="custom-usage-data">
  <h2>
    <a href="#custom-usage-data" name="custom-usage-data" class="pilcrow"></a>
Custom Usage Data
  </h2>
</div>
<p>If you have a website, you can query against the usage statistics of your site:</p>
<ol>
<li>
<p>Import your Google Analytics data into <a href="http://caniuse.com/">Can I Use</a>.
Press <code>Import…</code> button in Settings page.</p>
</li>
<li>
<p>Open browser DevTools on <a href="http://caniuse.com/">Can I Use</a> and paste this snippet
into the browser console:</p>
<pre><code class="js"><span class="hljs-keyword">var</span> e=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'a'</span>);e.setAttribute(<span class="hljs-string">'href'</span>, <span class="hljs-string">'data:text/plain;charset=utf-8,'</span>+<span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-built_in">JSON</span>.parse(localStorage[<span class="hljs-string">'usage-data-by-id'</span>])[localStorage[<span class="hljs-string">'config-primary_usage'</span>]])));e.setAttribute(<span class="hljs-string">'download'</span>,<span class="hljs-string">'stats.json'</span>);<span class="hljs-built_in">document</span>.body.appendChild(e);e.click();<span class="hljs-built_in">document</span>.body.removeChild(e);
</code></pre>
</li>
<li>
<p>Save the data to a <code>browserslist-stats.json</code> file in your project.</p>
</li>
</ol>
<p>Of course, you can generate usage statistics file by any other method.
File format should be like:</p>
<pre><code class="js">{
  <span class="hljs-string">"ie"</span>: {
    <span class="hljs-string">"6"</span>: <span class="hljs-number">0.01</span>,
    <span class="hljs-string">"7"</span>: <span class="hljs-number">0.4</span>,
    <span class="hljs-string">"8"</span>: <span class="hljs-number">1.5</span>
  },
  <span class="hljs-string">"chrome"</span>: {
    …
  },
  …
}
</code></pre>
<p>Note that you can query against your custom usage data
while also querying against global or regional data.
For example, the query <code>&gt; 1% in my stats, &gt; 5% in US, 10%</code> is permitted.</p>
<div class="pilwrap" id="webpack">
  <h2>
    <a href="#webpack" name="webpack" class="pilcrow"></a>
Webpack
  </h2>
</div>
<p>If you plan to use Browserslist on client-side (e. g., tools like CodePen)
Browserslist could take big part of your bundle — about 150 KB.</p>
<p>But the biggest part of this size will be region usage statistics, which could
be useless for you. You can use <code>IgnorePlugin</code> in webpack to cut it:</p>
<pre><code class="js"><span class="hljs-keyword">const</span> webpackConfig = {
  …
  plugins: [
    <span class="hljs-keyword">new</span> webpack.IgnorePlugin(<span class="hljs-regexp">/caniuse-lite\/data\/regions/</span>)
  ]
}
</code></pre>
<p>This plugin will reduce Browserslist size from 150 KB to 6 KB. But you loose
<code>&gt; 1% in US</code> queries support.</p>
<div class="pilwrap" id="js-api">
  <h2>
    <a href="#js-api" name="js-api" class="pilcrow"></a>
JS API
  </h2>
</div>
<pre><code class="js"><span class="hljs-keyword">var</span> browserslist = <span class="hljs-built_in">require</span>(<span class="hljs-string">'browserslist'</span>);

<span class="hljs-comment">// Your CSS/JS build tool code</span>
<span class="hljs-keyword">var</span> process = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">source, opts</span>) </span>{
    <span class="hljs-keyword">var</span> browsers = browserslist(opts.browsers, {
        <span class="hljs-attr">stats</span>: opts.stats,
        <span class="hljs-attr">path</span>:  opts.file,
        <span class="hljs-attr">env</span>:   opts.env
    });
    <span class="hljs-comment">// Your code to add features for selected browsers</span>
}
</code></pre>
<p>Queries can be a string <code>&quot;&gt; 5%, last 1 version&quot;</code>
or an array <code>['&gt; 5%', 'last 1 version']</code>.</p>
<p>If a query is missing, Browserslist will look for a config file.
You can provide a <code>path</code> option (that can be a file) to find the config file
relatively to it.</p>
<p>For non-JS environment and debug purpose you can use CLI tool:</p>
<pre><code class="sh">browserslist <span class="hljs-string">"&gt; 1%, last 2 versions"</span>
</code></pre>
<div class="pilwrap" id="coverage">
  <h2>
    <a href="#coverage" name="coverage" class="pilcrow"></a>
Coverage
  </h2>
</div>
<p>You can get total users coverage for selected browsers by JS API:</p>
<pre><code class="js">browserslist.coverage(browserslist(<span class="hljs-string">'&gt; 1%'</span>)) <span class="hljs-comment">//=&gt; 81.4</span>
</code></pre>
<pre><code class="js">browserslist.coverage(browserslist(<span class="hljs-string">'&gt; 1% in US'</span>), <span class="hljs-string">'US'</span>) <span class="hljs-comment">//=&gt; 83.1</span>
</code></pre>
<p>Or by CLI:</p>
<pre><code class="sh">$ browserslist --coverage <span class="hljs-string">"&gt; 1%"</span>
These browsers account <span class="hljs-keyword">for</span> 81.4% of all users globally
</code></pre>
<pre><code class="sh">$ browserslist --coverage=US <span class="hljs-string">"&gt; 1% in US"</span>
These browsers account <span class="hljs-keyword">for</span> 83.1% of all users <span class="hljs-keyword">in</span> the US
</code></pre>
<div class="pilwrap" id="internal-caches">
  <h2>
    <a href="#internal-caches" name="internal-caches" class="pilcrow"></a>
Internal caches
  </h2>
</div>
<p>Browserslist caches the configuration it reads from <code>package.json</code> and
<code>browserslist</code> files, as well as knowledge about the existence of files,
for the duration of the hosting process.</p>
<p>To clear these caches, use:</p>
<pre><code class="js">browserslist.clearCaches();
</code></pre>
<p>To disable the caching altogether, set the <code>BROWSERSLIST_DISABLE_CACHE</code>
environment variable.</p>
</div>
  </div>
</body>
</html>
