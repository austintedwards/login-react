<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/circular-json/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#circularjson">CircularJSON</a>
      </div>

      <div class="heading h3">
        <a href="#a-working-solution-to-a-common-problem">A Working Solution To A Common Problem</a>
      </div>

      <div class="heading h1">
        <a href="#node-installation-and-usage">Node Installation &amp;amp; Usage</a>
      </div>

      <div class="heading h1">
        <a href="#browser-installation-and-usage">Browser Installation &amp;amp; Usage</a>
      </div>

      <div class="heading h1">
        <a href="#api">API</a>
      </div>

      <div class="heading h1">
        <a href="#similar-libraries">Similar Libraries</a>
      </div>

      <div class="heading h3">
        <a href="#why-not-the-@izs-one">Why Not the @izs One</a>
      </div>

      <div class="heading h3">
        <a href="#why-not-put-random-name-solution">Why Not {{put random name}} Solution</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="circularjson">
  <h1>
    <a href="#circularjson" name="circularjson" class="pilcrow"></a>
CircularJSON
  </h1>
</div>
<p><img src="https://img.shields.io/npm/dm/circular-json.svg" alt="Downloads"> <a href="https://travis-ci.org/WebReflection/circular-json"><img src="https://travis-ci.org/WebReflection/circular-json.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/github/WebReflection/circular-json?branch=master"><img src="https://coveralls.io/repos/github/WebReflection/circular-json/badge.svg?branch=master" alt="Coverage Status"></a> <a href="https://github.com/WebReflection/donate"><img src="https://img.shields.io/badge/$-donate-ff69b4.svg?maxAge=2592000&amp;style=flat" alt="donate"></a></p>
<p>Serializes and deserializes otherwise valid JSON objects containing circular references into and from a specialized JSON format.</p>
<hr>
<div class="pilwrap" id="a-working-solution-to-a-common-problem">
  <h3>
    <a href="#a-working-solution-to-a-common-problem" name="a-working-solution-to-a-common-problem" class="pilcrow"></a>
A Working Solution To A Common Problem
  </h3>
</div>
<p>A usage example:</p>
<pre><code class="JavaScript"><span class="hljs-keyword">var</span> object = {};
object.arr = [
  object, object
];
object.arr.push(object.arr);
object.obj = object;

<span class="hljs-keyword">var</span> serialized = CircularJSON.stringify(object);
<span class="hljs-comment">// '{"arr":["~","~","~arr"],"obj":"~"}'</span>
<span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> CircularJSON DOES NOT parse JS</span>
<span class="hljs-comment">// it handles receiver and reviver callbacks</span>

<span class="hljs-keyword">var</span> unserialized = CircularJSON.parse(serialized);
<span class="hljs-comment">// { arr: [ [Circular], [Circular] ],</span>
<span class="hljs-comment">// obj: [Circular] }</span>

unserialized.obj === unserialized;
unserialized.arr[<span class="hljs-number">0</span>] === unserialized;
unserialized.arr.pop() === unserialized.arr;
</code></pre>
<p>A quick summary:</p>
<ul>
<li>uses <code>~</code> as a special prefix symbol to denote which parent the reference belongs to (i.e. <code>~root~child1~child2</code>)</li>
<li>reasonably fast in both serialization and deserialization</li>
<li>compact serialization for easier and slimmer transportation across environments</li>
<li><a href="test/circular-json.js.html">tested and covered</a> over nasty structures too</li>
<li>compatible with all JavaScript engines</li>
</ul>
<div class="pilwrap" id="node-installation-and-usage">
  <h1>
    <a href="#node-installation-and-usage" name="node-installation-and-usage" class="pilcrow"></a>
Node Installation &amp; Usage
  </h1>
</div>
<pre><code class="bash">npm install --save circular-json
</code></pre>
<pre><code class="javascript"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span>
  CircularJSON = <span class="hljs-built_in">require</span>(<span class="hljs-string">'circular-json'</span>),
  obj = { <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> },
  str
;
  
obj.self = obj;
str = CircularJSON.stringify(obj);
</code></pre>
<p>There are no dependencies.</p>
<div class="pilwrap" id="browser-installation-and-usage">
  <h1>
    <a href="#browser-installation-and-usage" name="browser-installation-and-usage" class="pilcrow"></a>
Browser Installation &amp; Usage
  </h1>
</div>
<ul>
<li>Global: &lt;build/circular-json.js&gt;</li>
<li>AMD: &lt;build/circular-json.amd.js&gt;</li>
<li>CommonJS: &lt;build/circular-json.node.js&gt;</li>
</ul>
<p>(generated via <a href="https://github.com/WebReflection/gitstrap">gitstrap</a>)</p>
<pre><code class="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"build/circular-json.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<pre><code class="javascript"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> CircularJSON = <span class="hljs-built_in">window</span>.CircularJSON
  , obj = { <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> }
  , str
  ;
  
obj.self = obj;
str = CircularJSON.stringify(obj);
</code></pre>
<p>NOTE: Platforms without native JSON (i.e. MSIE &lt;= 8) requires <code>json3.js</code> or similar.</p>
<p>It is also <em>a bad idea</em> to <code>CircularJSON.parse(JSON.stringify(object))</code> because of those manipulation used in <code>CircularJSON.stringify()</code> able to make parsing safe and secure.</p>
<p>As summary: <code>CircularJSON.parse(CircularJSON.stringify(object))</code> is the way to go, same is for <code>JSON.parse(JSON.stringify(object))</code>.</p>
<div class="pilwrap" id="api">
  <h1>
    <a href="#api" name="api" class="pilcrow"></a>
API
  </h1>
</div>
<p>It's the same as native JSON, except the fourth parameter <code>placeholder</code>, which circular references to be replaced with <code>&quot;[Circular]&quot;</code> (i.e. for logging).</p>
<ul>
<li>CircularJSON.stringify(object, replacer, spacer, placeholder)</li>
<li>CircularJSON.parse(string, reviver)</li>
</ul>
<p>Bear in mind <code>JSON.parse(CircularJSON.stringify(object))</code> will work but not produce the expected output.</p>
<div class="pilwrap" id="similar-libraries">
  <h1>
    <a href="#similar-libraries" name="similar-libraries" class="pilcrow"></a>
Similar Libraries
  </h1>
</div>
<div class="pilwrap" id="why-not-the-@izs-one">
  <h3>
    <a href="#why-not-the-@izs-one" name="why-not-the-@izs-one" class="pilcrow"></a>
Why Not the <a href="https://twitter.com/izs">@izs</a> One
  </h3>
</div>
<p>The module <a href="https://github.com/isaacs/json-stringify-safe">json-stringify-safe</a> seems to be for <code>console.log()</code>  but it's completely pointless for <code>JSON.parse()</code>, being latter one unable to retrieve back the initial structure. Here an example:</p>
<pre><code class="JavaScript"><span class="hljs-comment">// a logged object with circular references</span>
{
  <span class="hljs-string">"circularRef"</span>: <span class="hljs-string">"[Circular]"</span>,
  <span class="hljs-string">"list"</span>: [
    <span class="hljs-string">"[Circular]"</span>,
    <span class="hljs-string">"[Circular]"</span>
  ]
}
<span class="hljs-comment">// what do we do with above output ?</span>
</code></pre>
<p>Just type this in your <code>node</code> console: <code>var o = {}; o.a = o; console.log(o);</code>. The output will be <code>{ a: [Circular] }</code> ... good, but that ain't really solving the problem.</p>
<p>However, if that's all you need, the function used to create that kind of output is probably faster than <code>CircularJSON</code> and surely fits in less lines of code.</p>
<div class="pilwrap" id="why-not-put-random-name-solution">
  <h3>
    <a href="#why-not-put-random-name-solution" name="why-not-put-random-name-solution" class="pilcrow"></a>
Why Not {{put random name}} Solution
  </h3>
</div>
<p>So here the thing: circular references can be wrong but, if there is a need for them, any attempt to ignore them or remove them can be considered just a failure.</p>
<p>Not because the method is bad or it's not working, simply because the circular info, the one we needed and used in the first place, is lost!</p>
<p>In this case, <code>CircularJSON</code> does even more than just solve circular and recursions: it maps all same objects so that less memory is used as well on deserialization as less bandwidth too!
It's able to redefine those references back later on so the way we store is the way we retrieve and in a reasonably performant way, also trusting the snappy and native <code>JSON</code> methods to iterate.</p>
</div>
  </div>
</body>
</html>
